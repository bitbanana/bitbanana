V1計画
  - WebSocketのプル版で運用開始する。PullOnGreeTxみたいな

<価格変動アルゴリズム>
  - その日の最初に 5分ほど 前日のデータから新しい DayFruit レコードを作成する
  - 購入注文される
    - 未処理のBillを追加
  - 購入支払いされる
    - 未処理のBillを削除
    - ポケットの値、買われた数 を更新
  - 売却注文される
    - 未処理のTxを追加
  - 売却支払いされる
    - ポケットの値、売られた数 を更新
  - 更新時刻になる
    - 買われた数と売られた数に応じて 現在の価格を更新

Next
  <Bitfruit 完了>
  - HTTPサーバー実装
  - 最終調整 デプロイ

WebAPI (Bit Banana Server)

  - start-bonus
      初回限定ボーナスをもらう
      pubKey の登録を追加予定

  - balance-inquiry
      残高照会 アドレスのみ必要
      手数料は最初のうちは実装しないのでノーチェック

  - add-white-tx (WebSocket クライアント > サーバー)
      処理待ちの Tx を追加する
      pubKeyが必要

  - on-red-tx (WebSocket サーバー > クライアント)
      txが拒否されたとき
      本人たちにだけ通知するようにする
      Followerに addr を追加予定
  - それの pull バージョン

  - on-green-tx (WebSocket サーバー > クライアント)
      txがブロックとしてチェーンに追加されたとき
      本人たちにだけ通知するようにする
      Followerに addr を追加予定
  - それの pull バージョン

Web API (Bit Fruit Server)

  - see-fruits
      ビットフルーツ価格一覧を見る
  
  - see-pockets
      所有フルーツを見る

  - buy-fruits
      ビットフルーツの購入申請
      White PO List へ 支払い待ちPO(purchace-order) を追加
      支払い用の Tx ID を発行

  - sell-fruits
      ビットフルーツを売却申請


UseCase

  - 秘密鍵, 公開鍵を生成する
  - 公開鍵から アドレスを作成する
  - 秘密鍵, 公開鍵, アドレスから Wallet を作成して保存する
  - WebAPI 初回限定ボーナスをもらう
  - アイテム価格一覧を見る
  - アイテムを買う
  - アイテムを売る
     
V1.0.0リリース後の実装予定

- 初回ボーナスのバリデーション強化 残高0ではなくまだ一度も取引してないことを確認
- 定期的にデータ整合ランダムチェック
- 都度の整合バリデーションは重いのでしばらくはしない
- 送金 Google連携後
- ビットフルーツの分離
- 過去の変動データ取得APIを作成 => 外部に実装依頼
- DayFruits等はメモリにキャッシュとして持っておく
- AccountSnapshotは変更がなかった時は保存通信しない DayFruitも
